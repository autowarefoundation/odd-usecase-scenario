# Feature: Maintain safe distance from hidden vehicle slowing down

Ensures that ego is able to keep a safe distance from a slowing vehicle that is initially obstructed from ego's perception by another preceding vehicle. This is required to provide ego with the ability to quickly react to objects detected suddenly.

## Scenario Outline: Maintain safe distance from hidden vehicle slowing down when preceding vehicle cuts out to the left

Confirm that ego is able to adjust its speed such as to maintain a safe distance from a decelerating vehicle that is initially hidden by a preceding vehicle, when the preceding vehicle cuts out from ego lane to the left.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned ahead of ego, in the same lane
* And Npc0 is driving at a speed <vxi_npc0>, slower than ego
* And Npc1 is positioned <dxi_npc0_npc1> ahead of Npc0, in the same lane
* And Npc1 is driving at the same speed as Npc0, <vxi_npc0>

* When Ego approaches Npc0 longitudinally, to within <dx_ego_npc0>
* And later Npc0 cuts out from the ego lane to the left, within a timespan of <time_cut_in_npc0>
* And Npc1 decelerates down to <vx_npc1> at a rate of <ax_npc1>
* Then Ego starts decelerating to match the speed of Npc1, <vx_npc1>
* And Ego drives continuously at all times
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-NTR-001-0001.drawio.svg)

### Examples: 

  | vxi_ego | vxi_npc0 | dxi_npc0_npc1 | dx_ego_npc0 | vx_npc1 | ax_npc1  | time_cut_in_npc0 | axmin_ego  |
  | ------- | -------- | ------------- | ----------- | ------- | -------- | ---------------- | ---------- |
  | 20 km/h | 15 km/h  | 15 m          | 15 m        | 5 km/h  | -1 m/s^2 | 4 s              | -1.5 m/s^2 |
  | 30 km/h | 20 km/h  | 15 m          | 15 m        | 10 km/h | -1 m/s^2 | 4 s              | -1.5 m/s^2 |
  | 40 km/h | 25 km/h  | 15 m          | 15 m        | 15 km/h | -1 m/s^2 | 4 s              | -1.5 m/s^2 |


## Scenario Outline: Maintain safe distance from hidden vehicle slowing down when preceding vehicle cuts out to the right

Confirm that ego is able to adjust its speed such as to maintain a safe distance from a decelerating vehicle that is initially hidden by a preceding vehicle, when the preceding vehicle cuts out from ego lane to the right.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned ahead of ego, in the same lane
* And Npc0 is driving at a speed <vxi_npc0>, slower than ego
* And Npc1 is positioned <dxi_npc0_npc1> ahead of Npc0, in the same lane
* And Npc1 is driving at the same speed as Npc0, <vxi_npc0>

* When Ego approaches Npc0 longitudinally, to within <dx_ego_npc0>
* And later Npc0 cuts out from the ego lane to the right, within a timespan of <time_cut_in_npc0>
* And Npc1 decelerates down to <vx_npc1> at a rate of <ax_npc1>
* Then Ego starts decelerating to match the speed of Npc1, <vx_npc1>
* And Ego drives continuously at all times
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-NTR-001-0001.drawio.svg)

### Examples: 

  | vxi_ego | vxi_npc0 | dxi_npc0_npc1 | dx_ego_npc0 | vx_npc1 | ax_npc1  | time_cut_in_npc0 | axmin_ego  |
  | ------- | -------- | ------------- | ----------- | ------- | -------- | ---------------- | ---------- |
  | 20 km/h | 15 km/h  | 15 m          | 15 m        | 5 km/h  | -1 m/s^2 | 4 s              | -1.5 m/s^2 |
  | 30 km/h | 20 km/h  | 15 m          | 15 m        | 10 km/h | -1 m/s^2 | 4 s              | -1.5 m/s^2 |
  | 40 km/h | 25 km/h  | 15 m          | 15 m        | 15 km/h | -1 m/s^2 | 4 s              | -1.5 m/s^2 |

