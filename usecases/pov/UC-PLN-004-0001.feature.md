# Feature: Emergency braking against vehicles

Ensures that ego is able to fully stop when faced with a situation of imminent collision with another vehicle. This is required to provide a safety measure for sudden unpredicted changes in the driving environment.

## Scenario Outline: Stop safely when a stopped vehicle is uncovered after the preceding vehicle cuts out to the left

Confirm that ego is able to stop safely when the preceding vehicle cuts out of ego's lane revealing a stopped vehicle ahead.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned <dxi_ego_npc0> ahead of ego, in the same lane
* And Npc0 is driving at a speed <vxi_npc0>, slower than ego
* And Npc1 is positioned <dxi_npc0_npc1> ahead of Npc0, in the same lane
* And Npc1 is in standstill

* When Ego approaches Npc0 longitudinally, to within <dx_ego_npc0>
* And later Npc0 cuts out from the ego lane to the left, within a timespan of <time_cut_in_npc0>
* Then Ego starts decelerating
* And Ego reaches standstill
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples: 

  | vxi_ego  | vxi_npc0 | dxi_ego_npc0 | dxi_npc0_npc1 | dx_ego_npc0 | time_cut_in_npc0 | axmin_ego  |
  | -------- | -------- | ------------ | ------------- | ----------- | ---------------- | ---------- |
  | 90 km/h  | 80 km/h  | 40 m         | 333 m         | 20 m        | 4 s              | -5.0 m/s^2 |
  | 100 km/h | 80 km/h  | 70 m         | 333 m         | 20 m        | 4 s              | -5.0 m/s^2 |
  | 110 km/h | 80 km/h  | 100 m        | 333 m         | 20 m        | 4 s              | -5.0 m/s^2 |


## Scenario Outline: Stop safely when a stopped vehicle is uncovered after the preceding vehicle cuts out to the right

Confirm that ego is able to stop safely when the preceding vehicle cuts out of ego's lane revealing a stopped vehicle ahead.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned <dxi_ego_npc0> ahead of ego, in the same lane
* And Npc0 is driving at a speed <vxi_npc0>, slower than ego
* And Npc1 is positioned <dxi_npc0_npc1> ahead of Npc0, in the same lane
* And Npc1 is in standstill

* When Ego approaches Npc0 longitudinally, to within <dx_ego_npc0>
* And later Npc0 cuts out from the ego lane to the right, within a timespan of <time_cut_in_npc0>
* Then Ego starts decelerating
* And Ego reaches standstill
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples: 

  | vxi_ego  | vxi_npc0 | dxi_ego_npc0 | dxi_npc0_npc1 | dx_ego_npc0 | time_cut_in_npc0 | axmin_ego  |
  | -------- | -------- | ------------ | ------------- | ----------- | ---------------- | ---------- |
  | 90 km/h  | 80 km/h  | 40 m         | 333 m         | 20  m       | 4 s              | -5.0 m/s^2 |
  | 100 km/h | 80 km/h  | 70 m         | 333 m         | 20  m       | 4 s              | -5.0 m/s^2 |
  | 110 km/h | 80 km/h  | 100 m        | 333 m         | 20  m       | 4 s              | -5.0 m/s^2 |
