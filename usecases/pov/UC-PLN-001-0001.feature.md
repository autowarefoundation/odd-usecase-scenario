# Feature: Maintain safe distance from preceding vehicle

Ensures that ego is able to keep a safe distance from a preceding vehicle under different scenarios.
This is required to provide ego with enough time to react to sudden changes in movement of the preceding vehicle, or other traffic participants ahead. 

## Scenario Outline: Maintain safe distance from preceding vehicle that drives slower than ego

Confirm that ego is able to adjust its speed such as to maintain a safe distance from a preceding vehicle that drives at a constant speed slower than itself.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned ahead of ego, in the same driving lane
* And Npc0 is driving at <vxi_npc0>, smaller than <vxi_ego>

* When Ego approaches Npc0 up to a safe distance
* Then Ego starts decelerating with rate no faster than <axmin_ego>
* And Ego matches the speed of Npc0, <vxi_npc0>
* And Ego drives continuously at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples: 

  | vxi_ego | vxi_npc0 | axmin_ego  |
  | ------- | -------- | ---------- |
  | 20 km/h | 15 km/h  | -1.5 m/s^2 |
  | 30 km/h | 20 km/h  | -1.5 m/s^2 |
  | 40 km/h | 25 km/h  | -1.5 m/s^2 |


## Scenario Outline: Maintain safe distance from preceding vehicle that is decelerating partially

Confirm that ego is able to continuously adjust its speed such as to maintain a safe distance from a preceding vehicle that is decelerating.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned ahead of ego, in the same driving lane
* And Npc0 is driving at <vxi_npc0>, smaller than <vxi_ego>

* When Ego approaches Npc0 up to a safe distance
* Then Ego decelerates to match the speed of Npc0, <vxi_npc0>

* When Npc0 further decelerates to <vx_npc0> at a rate of <ax_npc0>
* Then Ego further decelerates to match the speed of Npc0, <vx_npc0>
* And Ego drives continuously at all times
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples:

  | vxi_ego | vxi_npc0 | axmin_ego  | vx_npc0 | ax_npc0    |
  | ------- | -------- | ---------- | ------- | ---------- |
  | 20 km/h | 15 km/h  | -1.5 m/s^2 | 10 km/h | -1.0 m/s^2 |
  | 30 km/h | 20 km/h  | -1.5 m/s^2 | 12 km/h | -1.0 m/s^2 |
  | 40 km/h | 25 km/h  | -1.5 m/s^2 | 15 km/h | -1.0 m/s^2 |


## Scenario Outline: Maintain safe distance from preceding vehicle that is decelerating completely

Confirm that ego is able to continuously adjust its speed such as to maintain a safe distance from a preceding vehicle that decelerates to a standstill.

* Given Ego is driving at <vxi_ego>
* And Npc0 is positioned ahead of ego, in the same driving lane
* And Npc0 is driving at <vxi_npc0>, smaller than <vxi_ego>

* When Ego approaches Npc0 up to a safe distance
* Then Ego decelerates to match the speed of Npc0, <vxi_npc0>

* When Npc0 further decelerates to a standstill at a rate of <ax_npc0>
* Then Ego further decelerates to a standstill
* And Ego keeps its deceleration rate slower than <axmin_ego> at all times
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples:

  | vxi_ego | vxi_npc0 | axmin_ego  | ax_npc0    |
  | ------- | -------- | ---------- | ---------- |
  | 20 km/h | 15 km/h  | -1.5 m/s^2 | -1.0 m/s^2 |
  | 30 km/h | 20 km/h  | -1.5 m/s^2 | -1.0 m/s^2 |
  | 40 km/h | 25 km/h  | -1.5 m/s^2 | -1.0 m/s^2 |


## Scenario Outline: Stop safely when detecting a preceding standstill vehicle

Confirm that ego is able to stop safely when a stopped vehicle is detected ahead of ego.

* Given Ego is driving at <vxi_ego>
* And Npc0 is <dxi_ego_npc0> ahead of ego, in the same driving lane
* And Npc0 is in standstill

* When Ego approaches Npc0
* Then Ego starts decelerating with rate no faster than <axmin_ego>
* And Ego reaches standstill
* And Ego drives safely with no collisions at all times

![Overview](./images/UC-PLN-001-0001.drawio.svg)

### Examples: 

  | vxi_ego  | dxi_ego_npc0 | axmin_ego  |
  | -------- | ------------ | ---------- |
  | 90 km/h  | 150 m        | -1.5 m/s^2 |
  | 100 km/h | 150 m        | -1.5 m/s^2 |
  | 110 km/h | 150 m        | -1.5 m/s^2 |